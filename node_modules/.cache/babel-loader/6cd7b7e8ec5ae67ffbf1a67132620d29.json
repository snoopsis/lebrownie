{"ast":null,"code":"import _regeneratorRuntime from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from\"react\";import axios from\"axios\";import PedidosContext from\"./PedidosContext\";import PedidosReducer from\"./PedidosReducer\";import{GET_PEDIDOS,ADD_PEDIDO,ERRO_PEDIDO}from\"../types\";var PedidosState=function PedidosState(props){var initialState={pedidos:null,erro:null,pagamento:{id:\"Nao Defenido\",status:\"Cartao Nao Foi Aceite\"},filtro:null};var _useReducer=useReducer(PedidosReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Get Pedidos Por Cliente\nvar getPedidos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/pedidos\");case 3:res=_context.sent;dispatch({type:GET_PEDIDOS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:ERRO_PEDIDO,payload:_context.t0.response.msg});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getPedidos(){return _ref.apply(this,arguments);};}();// Adicionar Pedido\nvar addPedido=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(pedido){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context2.prev=1;_context2.next=4;return axios.post(\"/api/pedidos\",pedido,config);case 4:res=_context2.sent;dispatch({type:ADD_PEDIDO,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:ERRO_PEDIDO,payload:_context2.t0});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function addPedido(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(PedidosContext.Provider,{value:{pedidos:state.pedidos,pagamento:state.pagamento,filtro:state.filtro,getPedidos:getPedidos,addPedido:addPedido}},props.children);};export default PedidosState;","map":{"version":3,"sources":["/home/snoopsis/nodeSites/lebrownie/client/src/context/pedidos/PedidosState.js"],"names":["React","useReducer","axios","PedidosContext","PedidosReducer","GET_PEDIDOS","ADD_PEDIDO","ERRO_PEDIDO","PedidosState","props","initialState","pedidos","erro","pagamento","id","status","filtro","state","dispatch","getPedidos","get","res","type","payload","data","response","msg","addPedido","pedido","config","headers","post","children"],"mappings":"6dAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,OAASC,WAAT,CAAsBC,UAAtB,CAAkCC,WAAlC,KAAqD,UAArD,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,KAAK,CAAI,CAC5B,GAAMC,CAAAA,YAAY,CAAG,CACnBC,OAAO,CAAE,IADU,CAEnBC,IAAI,CAAE,IAFa,CAGnBC,SAAS,CAAE,CACTC,EAAE,CAAE,cADK,CAETC,MAAM,CAAE,uBAFC,CAHQ,CAOnBC,MAAM,CAAE,IAPW,CAArB,CAD4B,gBAWFf,UAAU,CAACG,cAAD,CAAiBM,YAAjB,CAXR,4CAWrBO,KAXqB,iBAWdC,QAXc,iBAa5B;AACA,GAAMC,CAAAA,UAAU,0FAAG,iLAEGjB,CAAAA,KAAK,CAACkB,GAAN,CAAU,cAAV,CAFH,QAETC,GAFS,eAIfH,QAAQ,CAAC,CACPI,IAAI,CAAEjB,WADC,CAEPkB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAJe,+EASfN,QAAQ,CAAC,CACPI,IAAI,CAAEf,WADC,CAEPgB,OAAO,CAAE,YAAIE,QAAJ,CAAaC,GAFf,CAAD,CAAR,CATe,oEAAH,kBAAVP,CAAAA,UAAU,0CAAhB,CAgBA;AACA,GAAMQ,CAAAA,SAAS,2FAAG,kBAAMC,MAAN,qIACVC,MADU,CACD,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CADC,yCAQI5B,CAAAA,KAAK,CAAC6B,IAAN,CAAW,cAAX,CAA2BH,MAA3B,CAAmCC,MAAnC,CARJ,QAQRR,GARQ,gBAUdH,QAAQ,CAAC,CACPI,IAAI,CAAEhB,UADC,CAEPiB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAVc,mFAedN,QAAQ,CAAC,CACPI,IAAI,CAAEf,WADC,CAEPgB,OAAO,aAFA,CAAD,CAAR,CAfc,sEAAH,kBAATI,CAAAA,SAAS,6CAAf,CAsBA,mBACE,oBAAC,cAAD,CAAgB,QAAhB,EACE,KAAK,CAAE,CACLhB,OAAO,CAAEM,KAAK,CAACN,OADV,CAELE,SAAS,CAAEI,KAAK,CAACJ,SAFZ,CAGLG,MAAM,CAAEC,KAAK,CAACD,MAHT,CAILG,UAAU,CAAVA,UAJK,CAKLQ,SAAS,CAATA,SALK,CADT,EASGlB,KAAK,CAACuB,QATT,CADF,CAaD,CAlED,CAoEA,cAAexB,CAAAA,YAAf","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport PedidosContext from \"./PedidosContext\";\r\nimport PedidosReducer from \"./PedidosReducer\";\r\nimport { GET_PEDIDOS, ADD_PEDIDO, ERRO_PEDIDO } from \"../types\";\r\n\r\nconst PedidosState = props => {\r\n  const initialState = {\r\n    pedidos: null,\r\n    erro: null,\r\n    pagamento: {\r\n      id: \"Nao Defenido\",\r\n      status: \"Cartao Nao Foi Aceite\"\r\n    },\r\n    filtro: null\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(PedidosReducer, initialState);\r\n\r\n  // Get Pedidos Por Cliente\r\n  const getPedidos = async () => {\r\n    try {\r\n      const res = await axios.get(\"/api/pedidos\");\r\n\r\n      dispatch({\r\n        type: GET_PEDIDOS,\r\n        payload: res.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: ERRO_PEDIDO,\r\n        payload: err.response.msg\r\n      });\r\n    }\r\n  };\r\n\r\n  // Adicionar Pedido\r\n  const addPedido = async pedido => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post(\"/api/pedidos\", pedido, config);\r\n\r\n      dispatch({\r\n        type: ADD_PEDIDO,\r\n        payload: res.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: ERRO_PEDIDO,\r\n        payload: err\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <PedidosContext.Provider\r\n      value={{\r\n        pedidos: state.pedidos,\r\n        pagamento: state.pagamento,\r\n        filtro: state.filtro,\r\n        getPedidos,\r\n        addPedido\r\n      }}\r\n    >\r\n      {props.children}\r\n    </PedidosContext.Provider>\r\n  );\r\n};\r\n\r\nexport default PedidosState;\r\n"]},"metadata":{},"sourceType":"module"}