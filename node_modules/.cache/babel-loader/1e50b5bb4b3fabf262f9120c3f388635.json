{"ast":null,"code":"var _jsxFileName = \"/home/snoopsis/nodeSites/lebrownie/client/src/components/views/Carrinho.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport CarrinhoContext from \"../../context/carrinho/CarrinhoContext\";\nimport AuthContext from \"../../context/auth/authContext\";\nimport PedidosContext from \"../../context/pedidos/PedidosContext\";\nimport AlertContext from \"../../context/alert/alertContext\";\nimport Finalizado from \"./Finalizado\";\nimport axios from \"axios\";\n\nconst Carrinho = () => {\n  const history = useHistory(); // Contexto\n\n  const carrinhoContext = useContext(CarrinhoContext);\n  const authContext = useContext(AuthContext);\n  const pedidosContext = useContext(PedidosContext);\n  const alertContext = useContext(AlertContext);\n  const {\n    setAlert\n  } = alertContext;\n  const {\n    carrinho,\n    remCart,\n    updateItem,\n    getCart,\n    remAllCart,\n    decreaseItem,\n    addItem\n  } = carrinhoContext;\n  const {\n    client,\n    updateClient,\n    loadCliente\n  } = authContext;\n  const {\n    addPedido,\n    getPedidos\n  } = pedidosContext; // # Contexto\n  // Ciclo\n\n  useEffect(() => {\n    if (error.status === 404) {\n      history.push(\"/\");\n    }\n\n    loadCliente();\n    getCart();\n    getPedidos(); // eslint-disable-next-line\n  }, []); // # Ciclo\n\n  const [loading, setLoading] = useState(false);\n  const [finalizado, setFinalizado] = useState(); // Carrinho e Pedido\n\n  const totalCarrinho = () => {\n    const valores = carrinho.map(i => i.valor * i.quantidade);\n    var total = valores.reduce((total, numero) => total + numero, 0);\n    return total;\n  };\n\n  const onChange = e => {\n    updateClient({ ...client,\n      [e.target.name]: e.target.value\n    });\n    updateItem({ ...carrinho,\n      [e.target.name]: e.target.value\n    });\n    guessPaymentMethod();\n  };\n\n  const totalProdutos = () => {\n    return carrinho.map(produto => `${produto.nome} x${produto.quantidade}`);\n  };\n\n  const pedido = {\n    dadosPedido: totalProdutos().toString(),\n    nome: `${client.primeiroNome} ${client.ultimoNome}`,\n    email: `${client.email}`,\n    telefone: `${client.telefone}`,\n    endereco: `Rua ${client.rua}, ${client.numero}, ${client.complemento}, ${client.bairro}, ${client.cidade} - ${client.estado} `\n  };\n  window.Mercadopago.setPublishableKey(\"APP_USR-239a06cd-0a66-4e78-991b-dbb6255d6339\" // \"TEST-f6654274-0c49-4d91-a807-b03070868a4c\"\n  );\n  window.Mercadopago.getIdentificationTypes();\n\n  function guessPaymentMethod() {\n    let cardnum = document.getElementById(\"cardNumber\").value;\n\n    if (cardnum.length >= 6) {\n      let bin = cardnum.substring(0, 6);\n      window.Mercadopago.getPaymentMethod({\n        bin: bin\n      }, setPaymentMethod);\n    }\n  }\n\n  function setPaymentMethod(status, response) {\n    if (status === 200) {\n      let paymentMethodId = response[0].id;\n      let element = document.getElementById(\"payment_method_id\");\n      element.value = paymentMethodId;\n      getInstallments();\n    } else {\n      alert(`payment method info error: ${response}`);\n    }\n  }\n\n  function getInstallments() {\n    window.Mercadopago.getInstallments({\n      payment_method_id: document.getElementById(\"payment_method_id\").value,\n      amount: parseFloat(document.getElementById(\"transaction_amount\").value)\n    }, function (status, response) {\n      if (status === 200) {\n        document.getElementById(\"installments\").options.length = 0;\n        response[0].payer_costs.forEach(installment => {\n          let opt = document.createElement(\"option\");\n          opt.text = installment.recommended_message;\n          opt.value = installment.installments;\n          document.getElementById(\"installments\").appendChild(opt);\n        });\n      } else {\n        alert(`installments method info error: ${response}`);\n      }\n    });\n  }\n\n  function doPay(e) {\n    e.preventDefault();\n    var $form = document.querySelector(\"#pay\");\n    window.Mercadopago.createToken($form, sdkResponseHandler);\n    return false;\n  }\n\n  function sdkResponseHandler(status, response) {\n    if (status !== 200 && status !== 201) {\n      alert(\"Dados Incorretos, Confira e Insira Novamente.\");\n      localStorage.setItem(\"cartaoErro\", \"O seu cartao nao foi aceite, nenhuma cobranca sera feita. Tente Novamente.\");\n      window.location.reload();\n    } else {\n      var form = document.querySelector(\"#pay\");\n      var card = document.createElement(\"input\");\n      card.setAttribute(\"name\", \"token\");\n      card.setAttribute(\"type\", \"hidden\");\n      card.setAttribute(\"value\", response.id);\n      form.appendChild(card);\n      window.doSubmit = true;\n      axios({\n        method: \"post\",\n        url: \"/pay\",\n        data: {\n          token: response.id,\n          transaction_amount: totalCarrinho(),\n          installments: document.getElementById(\"installments\").value,\n          payment_method_id: document.getElementById(\"payment_method_id\").value,\n          email: pedido.email,\n          description: pedido.dadosPedido\n        }\n      }).then(function (response) {\n        const pag = {\n          id: response.data.response.id,\n          status: response.data.response.status\n        };\n        registoPedido(pag);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  } // Finalizar Pedido\n\n\n  const onSubmit = e => {\n    e.preventDefault();\n    setLoading(true); // updateDados(client);\n\n    doPay(e);\n  };\n\n  const registoPedido = pag => {\n    if (pag.status === \"rejected\") {\n      setAlert(\"O Seu Cartao nao Foi Aceite, Tente Novamente.\", \"danger\");\n      document.getElementById(\"cardNumber\").value = \"\";\n      document.getElementById(\"cardholderName\").value = \"\";\n      document.getElementById(\"cardExpirationMonth\").value = \"\";\n      document.getElementById(\"cardExpirationYear\").value = \"\";\n      document.getElementById(\"securityCode\").value = \"\";\n      document.getElementById(\"docNumber\").value = \"\"; // console.log(`Status: ${pag.status}`);\n\n      localStorage.setItem(\"cartaoErro\", \"O seu cartao nao foi aceite, nenhuma cobranca sera feita. Tente Novamente.\");\n      setTimeout(() => window.location.reload(), 6000);\n    } else {\n      addPedido({\n        numero_pedido: pag.id,\n        status_pagamento: pag.status,\n        produtos: pedido.dadosPedido,\n        valor: totalCarrinho(),\n        nome: pedido.nome,\n        endereco: pedido.endereco,\n        contato: pedido.telefone,\n        contato_email: pedido.email\n      });\n      setFinalizado({\n        numero_pedido: pag.id,\n        status_pagamento: pag.status,\n        produtos: pedido.dadosPedido,\n        valor: totalCarrinho(),\n        nome: pedido.nome,\n        endereco: pedido.endereco,\n        contato: pedido.telefone,\n        contato_email: pedido.email\n      });\n      localStorage.removeItem(\"cartaoErro\");\n      remAllCart();\n    }\n\n    setLoading(false);\n  };\n\n  const seguirCompra = () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pages-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }, \"Pedido\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }\n    }, carrinho.map(i => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-product first\",\n      key: i.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: i.img,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, i.nome)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      style: {\n        marginTop: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    }, \" \", i.valor * i.quantidade, \".00\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents remove\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-remove\",\n      onClick: () => remCart({\n        id: i.id,\n        nome: i.nome,\n        valor: i.valor,\n        img: i.img,\n        desc: i.desc,\n        quantidade: i.quantidade\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }\n    }, \"Quantidade\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn-floating btn-small scale-transition\",\n      style: {\n        backgroundColor: \"#fce4ec\",\n        marginRight: 5\n      },\n      onClick: () => decreaseItem({\n        id: i.id,\n        nome: i.nome,\n        desc: i.desc,\n        img: i.img,\n        valor: i.valor,\n        quantidade: i.quantidade\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons\",\n      style: {\n        color: \"#000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 23\n      }\n    }, \"remove\")), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"quantidade\",\n      type: \"number\",\n      readOnly: true,\n      style: {\n        width: 30,\n        textAlign: \"center\"\n      },\n      value: i.quantidade,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn-floating btn-small scale-transition\",\n      style: {\n        backgroundColor: \"#fce4ec\",\n        marginLeft: 5\n      },\n      onClick: () => addItem({\n        id: i.id,\n        nome: i.nome,\n        desc: i.desc,\n        img: i.img,\n        valor: i.valor,\n        quantidade: i.quantidade\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons\",\n      style: {\n        color: \"#000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 23\n      }\n    }, \"add\")))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"total-pay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }\n    }, carrinho.map(i => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      key: i.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 19\n      }\n    }, i.nome))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 19\n      }\n    }, i.valor * i.quantidade, \".00\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s8\",\n      style: {\n        marginBottom: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 15\n      }\n    }, \"Total\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"contents right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 15\n      }\n    }, totalCarrinho(), \".00\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: onSubmit,\n      id: \"pay\",\n      name: \"pay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pages-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 13\n      }\n    }, \"Dados para Entrega\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 13\n      }\n    }, \"Celular\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"telefone\",\n      value: client.telefone,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 13\n      }\n    }, \"Rua\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"rua\",\n      value: client.rua,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 13\n      }\n    }, \"Numero\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"numero\",\n      value: client.numero,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 13\n      }\n    }, \"Complemento\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"complemento\",\n      value: client.complemento,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 13\n      }\n    }, \"Bairro\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"numero\",\n      value: client.bairro,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }\n    }, \"Cidade\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"cidade\",\n      value: client.cidade,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 13\n      }\n    }, \"Estado\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"numero\",\n      value: client.estado,\n      required: true,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pages-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 13\n      }\n    }, \"Pagamento\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"line\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 13\n      }\n    }, localStorage.getItem(\"cartaoErro\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-contents\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      id: \"description\",\n      value: totalProdutos(),\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"transaction_amount\",\n      value: pedido.dadosPedido,\n      type: \"hidden\",\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"cardNumber\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 15\n      }\n    }, \"N\\xFAmero do cart\\xE3o\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"cardNumber\",\n      \"data-checkout\": \"cardNumber\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"cardholderName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 15\n      }\n    }, \"Nome Igual ao Cartao\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"cardholderName\",\n      \"data-checkout\": \"cardholderName\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"cardExpirationMonth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 15\n      }\n    }, \"M\\xEAs de vencimento\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"cardExpirationMonth\",\n      \"data-checkout\": \"cardExpirationMonth\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"cardExpirationYear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 15\n      }\n    }, \"Ano de vencimento\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"cardExpirationYear\",\n      \"data-checkout\": \"cardExpirationYear\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"securityCode\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 15\n      }\n    }, \"C\\xF3digo de seguran\\xE7a\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"securityCode\",\n      \"data-checkout\": \"securityCode\",\n      onChange: onChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      type: \"hidden\",\n      id: \"installments\",\n      className: \"form-control\",\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      id: \"docType\",\n      \"data-checkout\": \"docType\",\n      type: \"hidden\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"docNumber\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 15\n      }\n    }, \"CPF\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"docNumber\",\n      \"data-checkout\": \"docNumber\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      id: \"email\",\n      value: pedido.email,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      id: \"payment_method_id\",\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 13\n      }\n    }), !loading && /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-send\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 17\n      }\n    }), \"Fazer Pedido\"), loading && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 25\n      }\n    }, \"Aguarde...\"))));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 5\n    }\n  }, finalizado && /*#__PURE__*/React.createElement(Finalizado, {\n    pedido: finalizado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"segments-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }\n  }, carrinho.length > 0 && seguirCompra())));\n};\n\nexport default Carrinho;","map":{"version":3,"sources":["/home/snoopsis/nodeSites/lebrownie/client/src/components/views/Carrinho.js"],"names":["React","useContext","useState","useEffect","useHistory","CarrinhoContext","AuthContext","PedidosContext","AlertContext","Finalizado","axios","Carrinho","history","carrinhoContext","authContext","pedidosContext","alertContext","setAlert","carrinho","remCart","updateItem","getCart","remAllCart","decreaseItem","addItem","client","updateClient","loadCliente","addPedido","getPedidos","error","status","push","loading","setLoading","finalizado","setFinalizado","totalCarrinho","valores","map","i","valor","quantidade","total","reduce","numero","onChange","e","target","name","value","guessPaymentMethod","totalProdutos","produto","nome","pedido","dadosPedido","toString","primeiroNome","ultimoNome","email","telefone","endereco","rua","complemento","bairro","cidade","estado","window","Mercadopago","setPublishableKey","getIdentificationTypes","cardnum","document","getElementById","length","bin","substring","getPaymentMethod","setPaymentMethod","response","paymentMethodId","id","element","getInstallments","alert","payment_method_id","amount","parseFloat","options","payer_costs","forEach","installment","opt","createElement","text","recommended_message","installments","appendChild","doPay","preventDefault","$form","querySelector","createToken","sdkResponseHandler","localStorage","setItem","location","reload","form","card","setAttribute","doSubmit","method","url","data","token","transaction_amount","description","then","pag","registoPedido","catch","console","log","onSubmit","setTimeout","numero_pedido","status_pagamento","produtos","contato","contato_email","removeItem","seguirCompra","img","marginTop","desc","backgroundColor","marginRight","color","width","textAlign","marginLeft","marginBottom","getItem"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport CarrinhoContext from \"../../context/carrinho/CarrinhoContext\";\r\nimport AuthContext from \"../../context/auth/authContext\";\r\nimport PedidosContext from \"../../context/pedidos/PedidosContext\";\r\nimport AlertContext from \"../../context/alert/alertContext\";\r\nimport Finalizado from \"./Finalizado\";\r\nimport axios from \"axios\";\r\n\r\nconst Carrinho = () => {\r\n  const history = useHistory();\r\n\r\n  // Contexto\r\n  const carrinhoContext = useContext(CarrinhoContext);\r\n  const authContext = useContext(AuthContext);\r\n  const pedidosContext = useContext(PedidosContext);\r\n  const alertContext = useContext(AlertContext);\r\n\r\n  const { setAlert } = alertContext;\r\n  const {\r\n    carrinho,\r\n    remCart,\r\n    updateItem,\r\n    getCart,\r\n    remAllCart,\r\n    decreaseItem,\r\n    addItem\r\n  } = carrinhoContext;\r\n  const { client, updateClient, loadCliente } = authContext;\r\n  const { addPedido, getPedidos } = pedidosContext;\r\n  // # Contexto\r\n\r\n  // Ciclo\r\n  useEffect(() => {\r\n    if (error.status === 404) {\r\n      history.push(\"/\");\r\n    }\r\n    loadCliente();\r\n    getCart();\r\n    getPedidos();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n  // # Ciclo\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [finalizado, setFinalizado] = useState();\r\n\r\n  // Carrinho e Pedido\r\n  const totalCarrinho = () => {\r\n    const valores = carrinho.map(i => i.valor * i.quantidade);\r\n    var total = valores.reduce((total, numero) => total + numero, 0);\r\n    return total;\r\n  };\r\n\r\n  const onChange = e => {\r\n    updateClient({ ...client, [e.target.name]: e.target.value });\r\n    updateItem({ ...carrinho, [e.target.name]: e.target.value });\r\n    guessPaymentMethod();\r\n  };\r\n\r\n  const totalProdutos = () => {\r\n    return carrinho.map(produto => `${produto.nome} x${produto.quantidade}`);\r\n  };\r\n\r\n  const pedido = {\r\n    dadosPedido: totalProdutos().toString(),\r\n    nome: `${client.primeiroNome} ${client.ultimoNome}`,\r\n    email: `${client.email}`,\r\n    telefone: `${client.telefone}`,\r\n    endereco: `Rua ${client.rua}, ${client.numero}, ${client.complemento}, ${client.bairro}, ${client.cidade} - ${client.estado} `\r\n  };\r\n\r\n  window.Mercadopago.setPublishableKey(\r\n    \"APP_USR-239a06cd-0a66-4e78-991b-dbb6255d6339\"\r\n    // \"TEST-f6654274-0c49-4d91-a807-b03070868a4c\"\r\n  );\r\n\r\n  window.Mercadopago.getIdentificationTypes();\r\n\r\n  function guessPaymentMethod() {\r\n    let cardnum = document.getElementById(\"cardNumber\").value;\r\n    if (cardnum.length >= 6) {\r\n      let bin = cardnum.substring(0, 6);\r\n      window.Mercadopago.getPaymentMethod(\r\n        {\r\n          bin: bin\r\n        },\r\n        setPaymentMethod\r\n      );\r\n    }\r\n  }\r\n\r\n  function setPaymentMethod(status, response) {\r\n    if (status === 200) {\r\n      let paymentMethodId = response[0].id;\r\n      let element = document.getElementById(\"payment_method_id\");\r\n      element.value = paymentMethodId;\r\n      getInstallments();\r\n    } else {\r\n      alert(`payment method info error: ${response}`);\r\n    }\r\n  }\r\n\r\n  function getInstallments() {\r\n    window.Mercadopago.getInstallments(\r\n      {\r\n        payment_method_id: document.getElementById(\"payment_method_id\").value,\r\n        amount: parseFloat(document.getElementById(\"transaction_amount\").value)\r\n      },\r\n      function(status, response) {\r\n        if (status === 200) {\r\n          document.getElementById(\"installments\").options.length = 0;\r\n          response[0].payer_costs.forEach(installment => {\r\n            let opt = document.createElement(\"option\");\r\n            opt.text = installment.recommended_message;\r\n            opt.value = installment.installments;\r\n            document.getElementById(\"installments\").appendChild(opt);\r\n          });\r\n        } else {\r\n          alert(`installments method info error: ${response}`);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  function doPay(e) {\r\n    e.preventDefault();\r\n    var $form = document.querySelector(\"#pay\");\r\n\r\n    window.Mercadopago.createToken($form, sdkResponseHandler);\r\n\r\n    return false;\r\n  }\r\n\r\n  function sdkResponseHandler(status, response) {\r\n    if (status !== 200 && status !== 201) {\r\n      alert(\"Dados Incorretos, Confira e Insira Novamente.\");\r\n      localStorage.setItem(\r\n        \"cartaoErro\",\r\n        \"O seu cartao nao foi aceite, nenhuma cobranca sera feita. Tente Novamente.\"\r\n      );\r\n      window.location.reload();\r\n    } else {\r\n      var form = document.querySelector(\"#pay\");\r\n      var card = document.createElement(\"input\");\r\n      card.setAttribute(\"name\", \"token\");\r\n      card.setAttribute(\"type\", \"hidden\");\r\n      card.setAttribute(\"value\", response.id);\r\n      form.appendChild(card);\r\n\r\n      window.doSubmit = true;\r\n\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/pay\",\r\n        data: {\r\n          token: response.id,\r\n          transaction_amount: totalCarrinho(),\r\n          installments: document.getElementById(\"installments\").value,\r\n          payment_method_id: document.getElementById(\"payment_method_id\").value,\r\n          email: pedido.email,\r\n          description: pedido.dadosPedido\r\n        }\r\n      })\r\n        .then(function(response) {\r\n          const pag = {\r\n            id: response.data.response.id,\r\n            status: response.data.response.status\r\n          };\r\n          registoPedido(pag);\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    }\r\n  }\r\n\r\n  // Finalizar Pedido\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    // updateDados(client);\r\n    doPay(e);\r\n  };\r\n\r\n  const registoPedido = pag => {\r\n    if (pag.status === \"rejected\") {\r\n      setAlert(\"O Seu Cartao nao Foi Aceite, Tente Novamente.\", \"danger\");\r\n      document.getElementById(\"cardNumber\").value = \"\";\r\n      document.getElementById(\"cardholderName\").value = \"\";\r\n      document.getElementById(\"cardExpirationMonth\").value = \"\";\r\n      document.getElementById(\"cardExpirationYear\").value = \"\";\r\n      document.getElementById(\"securityCode\").value = \"\";\r\n      document.getElementById(\"docNumber\").value = \"\";\r\n      // console.log(`Status: ${pag.status}`);\r\n      localStorage.setItem(\r\n        \"cartaoErro\",\r\n        \"O seu cartao nao foi aceite, nenhuma cobranca sera feita. Tente Novamente.\"\r\n      );\r\n      setTimeout(() => window.location.reload(), 6000);\r\n    } else {\r\n      addPedido({\r\n        numero_pedido: pag.id,\r\n        status_pagamento: pag.status,\r\n        produtos: pedido.dadosPedido,\r\n        valor: totalCarrinho(),\r\n        nome: pedido.nome,\r\n        endereco: pedido.endereco,\r\n        contato: pedido.telefone,\r\n        contato_email: pedido.email\r\n      });\r\n      setFinalizado({\r\n        numero_pedido: pag.id,\r\n        status_pagamento: pag.status,\r\n        produtos: pedido.dadosPedido,\r\n        valor: totalCarrinho(),\r\n        nome: pedido.nome,\r\n        endereco: pedido.endereco,\r\n        contato: pedido.telefone,\r\n        contato_email: pedido.email\r\n      });\r\n      localStorage.removeItem(\"cartaoErro\");\r\n      remAllCart();\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const seguirCompra = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"pages-title\">\r\n          <h3>Pedido</h3>\r\n          <div className=\"line\"></div>\r\n        </div>\r\n        <div className=\"cart\">\r\n          {carrinho.map(i => (\r\n            <div className=\"cart-product first\" key={i.id}>\r\n              <div className=\"row\">\r\n                <div className=\"col s4\">\r\n                  <div className=\"contents\">\r\n                    <img src={i.img} alt=\"\" />\r\n                  </div>\r\n                </div>\r\n                <div className=\"col s6\">\r\n                  <div className=\"contents\">\r\n                    <strong>{i.nome}</strong>\r\n                  </div>\r\n                  <div className=\"contents\" style={{ marginTop: 20 }}>\r\n                    <strong>\r\n                      {\" \"}\r\n                      {i.valor * i.quantidade}\r\n                      {\".00\"}\r\n                    </strong>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col s2\">\r\n                  <div className=\"contents remove\">\r\n                    <i\r\n                      className=\"fa fa-remove\"\r\n                      onClick={() =>\r\n                        remCart({\r\n                          id: i.id,\r\n                          nome: i.nome,\r\n                          valor: i.valor,\r\n                          img: i.img,\r\n                          desc: i.desc,\r\n                          quantidade: i.quantidade\r\n                        })\r\n                      }\r\n                    ></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                {/* <div className=\"col s4\">\r\n                    <div className=\"contents\">\r\n                      <p>Valor</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col s8\" style={{ marginBottom: 5 }}>\r\n                    <div className=\"contents\">\r\n                      <p name=\"valor\" onChange={onChange}>\r\n                        {i.valor * i.quantidade}\r\n                        {\".00\"}\r\n                      </p>\r\n                    </div>\r\n                  </div> */}\r\n                <div className=\"col s4\">\r\n                  <div className=\"contents\">\r\n                    <p>Quantidade</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col s8\">\r\n                  <div className=\"contents\">\r\n                    <button\r\n                      class=\"btn-floating btn-small scale-transition\"\r\n                      style={{ backgroundColor: \"#fce4ec\", marginRight: 5 }}\r\n                      onClick={() =>\r\n                        decreaseItem({\r\n                          id: i.id,\r\n                          nome: i.nome,\r\n                          desc: i.desc,\r\n                          img: i.img,\r\n                          valor: i.valor,\r\n                          quantidade: i.quantidade\r\n                        })\r\n                      }\r\n                    >\r\n                      <i class=\"material-icons\" style={{ color: \"#000\" }}>\r\n                        remove\r\n                      </i>\r\n                    </button>\r\n\r\n                    <input\r\n                      name=\"quantidade\"\r\n                      type=\"number\"\r\n                      readOnly\r\n                      style={{ width: 30, textAlign: \"center\" }}\r\n                      value={i.quantidade}\r\n                    ></input>\r\n                    <button\r\n                      class=\"btn-floating btn-small scale-transition\"\r\n                      style={{ backgroundColor: \"#fce4ec\", marginLeft: 5 }}\r\n                      onClick={() =>\r\n                        addItem({\r\n                          id: i.id,\r\n                          nome: i.nome,\r\n                          desc: i.desc,\r\n                          img: i.img,\r\n                          valor: i.valor,\r\n                          quantidade: i.quantidade\r\n                        })\r\n                      }\r\n                    >\r\n                      <i class=\"material-icons\" style={{ color: \"#000\" }}>\r\n                        add\r\n                      </i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"total-pay\">\r\n          {carrinho.map(i => (\r\n            <div className=\"row\" key={i.id}>\r\n              <div className=\"col s8\">\r\n                <div className=\"contents\">\r\n                  <p>{i.nome}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"col s4\">\r\n                <div className=\"contents right\">\r\n                  <p>\r\n                    {i.valor * i.quantidade}\r\n                    {\".00\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div className=\"col s8\" style={{ marginBottom: 10 }}>\r\n            <div className=\"contents\">\r\n              <h5>Total</h5>\r\n            </div>\r\n          </div>\r\n          <div className=\"col s4\">\r\n            <div className=\"contents right\">\r\n              <h5>\r\n                {totalCarrinho()}\r\n                {\".00\"}\r\n              </h5>\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <br />\r\n        </div>\r\n        <form onSubmit={onSubmit} id=\"pay\" name=\"pay\">\r\n          <div className=\"pages-title\">\r\n            <h3>Dados para Entrega</h3>\r\n            <div className=\"line\"></div>\r\n          </div>\r\n          <div className=\"signup-contents\">\r\n            <label>Celular</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"telefone\"\r\n              value={client.telefone}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Rua</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"rua\"\r\n              value={client.rua}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Numero</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"numero\"\r\n              value={client.numero}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Complemento</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"complemento\"\r\n              value={client.complemento}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Bairro</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"numero\"\r\n              value={client.bairro}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Cidade</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"cidade\"\r\n              value={client.cidade}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n            <label>Estado</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"numero\"\r\n              value={client.estado}\r\n              required\r\n              onChange={onChange}\r\n            />\r\n          </div>\r\n          <div className=\"pages-title\">\r\n            <h3>Pagamento</h3>\r\n            <div className=\"line\"></div>\r\n            <p>{localStorage.getItem(\"cartaoErro\")}</p>\r\n          </div>\r\n          <div className=\"signup-contents\">\r\n            <p>\r\n              <input\r\n                type=\"hidden\"\r\n                id=\"description\"\r\n                value={totalProdutos()}\r\n                onChange={onChange}\r\n              />\r\n            </p>\r\n            <p>\r\n              <input\r\n                id=\"transaction_amount\"\r\n                value={pedido.dadosPedido}\r\n                type=\"hidden\"\r\n                onChange={onChange}\r\n              />\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"cardNumber\">Número do cartão</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"cardNumber\"\r\n                data-checkout=\"cardNumber\"\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"cardholderName\">Nome Igual ao Cartao</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"cardholderName\"\r\n                data-checkout=\"cardholderName\"\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"cardExpirationMonth\">Mês de vencimento</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"cardExpirationMonth\"\r\n                data-checkout=\"cardExpirationMonth\"\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"cardExpirationYear\">Ano de vencimento</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"cardExpirationYear\"\r\n                data-checkout=\"cardExpirationYear\"\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"securityCode\">Código de segurança</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"securityCode\"\r\n                data-checkout=\"securityCode\"\r\n                onChange={onChange}\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <select\r\n                type=\"hidden\"\r\n                id=\"installments\"\r\n                className=\"form-control\"\r\n                onChange={onChange}\r\n              ></select>\r\n            </p>\r\n            <p>\r\n              <select\r\n                id=\"docType\"\r\n                data-checkout=\"docType\"\r\n                type=\"hidden\"\r\n              ></select>\r\n            </p>\r\n            <p>\r\n              <label htmlFor=\"docNumber\">CPF</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"docNumber\"\r\n                data-checkout=\"docNumber\"\r\n                required\r\n              />\r\n            </p>\r\n            <p>\r\n              <input\r\n                type=\"hidden\"\r\n                id=\"email\"\r\n                value={pedido.email}\r\n                onChange={onChange}\r\n              />\r\n            </p>\r\n            <input type=\"hidden\" id=\"payment_method_id\" onChange={onChange} />\r\n            {!loading && (\r\n              <button type=\"submit\" className=\"btn\">\r\n                <i className=\"fa fa-send\"></i>Fazer Pedido\r\n              </button>\r\n            )}\r\n            {loading && <button className=\"button\">Aguarde...</button>}\r\n          </div>\r\n        </form>\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {finalizado && <Finalizado pedido={finalizado} />}\r\n      <div className=\"segments-page\">\r\n        <div className=\"container\">{carrinho.length > 0 && seguirCompra()}</div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Carrinho;\r\n"]},"metadata":{},"sourceType":"module"}