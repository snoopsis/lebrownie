{"ast":null,"code":"import _defineProperty from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/snoopsis/nodeSites/lebrownie/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import{Link}from\"react-router-dom\";import AlertContext from\"../../context/alert/alertContext\";import AuthContext from\"../../context/auth/authContext\";import CarrinhoContext from\"../../context/carrinho/CarrinhoContext\";var Cadastro=function Cadastro(props){var alertContext=useContext(AlertContext);var authContext=useContext(AuthContext);var carrinhoContext=useContext(CarrinhoContext);var setAlert=alertContext.setAlert;var register=authContext.register,error=authContext.error,clearErrors=authContext.clearErrors,isAuthenticated=authContext.isAuthenticated;var carrinho=carrinhoContext.carrinho;useEffect(function(){if(error===\"Ja se Cadastrou? Esse email ja existe, tente fazer login!\"){setAlert(error,\"danger\");clearErrors();}// eslint-disable-next-line\n},[error,isAuthenticated,props.history]);var _useState=useState({primeiroNome:\"\",ultimoNome:\"\",email:\"\",telefone:\"\",rua:\"\",numero:\"\",bairro:\"\",complemento:\"\",cidade:\"\",estado:\"\",password:\"\",password2:\"\",cep:\"\"}),_useState2=_slicedToArray(_useState,2),client=_useState2[0],setClient=_useState2[1];var primeiroNome=client.primeiroNome,ultimoNome=client.ultimoNome,email=client.email,telefone=client.telefone,rua=client.rua,numero=client.numero,bairro=client.bairro,complemento=client.complemento,cidade=client.cidade,estado=client.estado,password=client.password,password2=client.password2,cep=client.cep;var onChange=function onChange(e){return setClient(_objectSpread(_objectSpread({},client),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();if(primeiroNome===\"\"||ultimoNome===\"\"||telefone===\"\"||rua===\"\"||numero===\"\"||bairro===\"\"||complemento===\"\"||cidade===\"\"||estado===\"\"||email===\"\"||password===\"\"||cep===\"\"){setAlert(\"Por favor preencha todos os campos\",\"danger\");}else if(password!==password2){setAlert(\"A Senha nao esta igual na confirmacao, digite de novo por favor.\",\"danger\");}else{register({primeiroNome:primeiroNome,ultimoNome:ultimoNome,email:email,telefone:telefone,rua:rua,numero:numero,bairro:bairro,cep:cep,complemento:complemento,cidade:cidade,estado:estado,password:password});}};function limpa_formulário_cep(){//Limpa valores do formulário de cep.\ndocument.getElementById(\"rua\").value=\"\";document.getElementById(\"bairro\").value=\"\";document.getElementById(\"cidade\").value=\"\";document.getElementById(\"uf\").value=\"\";}function meu_callback(conteudo){if(!(\"erro\"in conteudo)){//Atualiza os campos com os valores.\ndocument.getElementById(\"rua\").value=conteudo.logradouro;document.getElementById(\"bairro\").value=conteudo.bairro;document.getElementById(\"cidade\").value=conteudo.localidade;document.getElementById(\"uf\").value=conteudo.uf;}//end if.\nelse{//CEP não Encontrado.\nlimpa_formulário_cep();alert(\"CEP não encontrado.\");}}function pesquisacep(valor){//Nova variável \"cep\" somente com dígitos.\nvar cep=valor.replace(/\\D/g,\"\");//Verifica se campo cep possui valor informado.\nif(cep!==\"\"){//Expressão regular para validar o CEP.\nvar validacep=/^[0-9]{8}$/;//Valida o formato do CEP.\nif(validacep.test(cep)){//Preenche os campos com \"...\" enquanto consulta webservice.\ndocument.getElementById(\"rua\").value=\"...\";document.getElementById(\"bairro\").value=\"...\";document.getElementById(\"cidade\").value=\"...\";document.getElementById(\"uf\").value=\"...\";//Cria um elemento javascript.\nvar script=document.createElement(\"script\");//Sincroniza com o callback.\nfetch(\"https://viacep.com.br/ws/41650035/json\").then(function(response){return response.json();}).then(function(data){script.src=meu_callback(data);});//Insere script no documento e carrega o conteúdo.\ndocument.body.appendChild(script);}//end if.\nelse{//cep é inválido.\nlimpa_formulário_cep();alert(\"Formato de CEP inválido.\");}}//end if.\nelse{//cep sem valor, limpa formulário.\nlimpa_formulário_cep();}}return/*#__PURE__*/React.createElement(\"div\",{className:\"sign-up segments-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"signup-contents\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pages-title\"},carrinho.length>0?\"Para continuar e comprar os seus Produtos, por favor preencha os dados abaixo:\":/*#__PURE__*/React.createElement(\"h3\",null,\"Cadastro\"),/*#__PURE__*/React.createElement(\"div\",{className:\"line\"})),/*#__PURE__*/React.createElement(Link,{to:\"/login\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pages-title\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Ja e Cliente?\",\" \",/*#__PURE__*/React.createElement(\"strong\",{style:{color:\"#c62828 \"}},\"Faca Login\")))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit,method:\"get\",action:\".\"},/*#__PURE__*/React.createElement(\"label\",null,\"Primeiro Nome\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"primeiroNome\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Ultimo Nome\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"ultimoNome\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Celular\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"telefone\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"CEP\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"cep\",onChange:onChange,id:\"cep\",size:\"10\",maxLength:\"9\",onBlur:function onBlur(){return pesquisacep(client.cep);},required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Rua\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"rua\",id:\"rua\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Numero\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"numero\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Bairro\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"bairro\",id:\"bairro\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Complemento\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"complemento\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Cidade\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"cidade\",id:\"cidade\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Estado\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"estado\",id:\"uf\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Senha\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"label\",null,\"Confirme Senha\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password2\",onChange:onChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-send\"}),\"Salvar\")))));};export default Cadastro;","map":{"version":3,"sources":["/home/snoopsis/nodeSites/lebrownie/client/src/components/auth/Cadastro.js"],"names":["React","useState","useContext","useEffect","Link","AlertContext","AuthContext","CarrinhoContext","Cadastro","props","alertContext","authContext","carrinhoContext","setAlert","register","error","clearErrors","isAuthenticated","carrinho","history","primeiroNome","ultimoNome","email","telefone","rua","numero","bairro","complemento","cidade","estado","password","password2","cep","client","setClient","onChange","e","target","name","value","onSubmit","preventDefault","limpa_formulário_cep","document","getElementById","meu_callback","conteudo","logradouro","localidade","uf","alert","pesquisacep","valor","replace","validacep","test","script","createElement","fetch","then","response","json","data","src","body","appendChild","length","color"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AlertContext from \"../../context/alert/alertContext\";\r\nimport AuthContext from \"../../context/auth/authContext\";\r\nimport CarrinhoContext from \"../../context/carrinho/CarrinhoContext\";\r\n\r\nconst Cadastro = props => {\r\n  const alertContext = useContext(AlertContext);\r\n  const authContext = useContext(AuthContext);\r\n  const carrinhoContext = useContext(CarrinhoContext);\r\n\r\n  const { setAlert } = alertContext;\r\n  const { register, error, clearErrors, isAuthenticated } = authContext;\r\n  const { carrinho } = carrinhoContext;\r\n\r\n  useEffect(() => {\r\n    if (error === \"Ja se Cadastrou? Esse email ja existe, tente fazer login!\") {\r\n      setAlert(error, \"danger\");\r\n      clearErrors();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [error, isAuthenticated, props.history]);\r\n\r\n  const [client, setClient] = useState({\r\n    primeiroNome: \"\",\r\n    ultimoNome: \"\",\r\n    email: \"\",\r\n    telefone: \"\",\r\n    rua: \"\",\r\n    numero: \"\",\r\n    bairro: \"\",\r\n    complemento: \"\",\r\n    cidade: \"\",\r\n    estado: \"\",\r\n    password: \"\",\r\n    password2: \"\",\r\n    cep: \"\"\r\n  });\r\n\r\n  const {\r\n    primeiroNome,\r\n    ultimoNome,\r\n    email,\r\n    telefone,\r\n    rua,\r\n    numero,\r\n    bairro,\r\n    complemento,\r\n    cidade,\r\n    estado,\r\n    password,\r\n    password2,\r\n    cep\r\n  } = client;\r\n\r\n  const onChange = e =>\r\n    setClient({ ...client, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    if (\r\n      primeiroNome === \"\" ||\r\n      ultimoNome === \"\" ||\r\n      telefone === \"\" ||\r\n      rua === \"\" ||\r\n      numero === \"\" ||\r\n      bairro === \"\" ||\r\n      complemento === \"\" ||\r\n      cidade === \"\" ||\r\n      estado === \"\" ||\r\n      email === \"\" ||\r\n      password === \"\" ||\r\n      cep === \"\"\r\n    ) {\r\n      setAlert(\"Por favor preencha todos os campos\", \"danger\");\r\n    } else if (password !== password2) {\r\n      setAlert(\r\n        \"A Senha nao esta igual na confirmacao, digite de novo por favor.\",\r\n        \"danger\"\r\n      );\r\n    } else {\r\n      register({\r\n        primeiroNome,\r\n        ultimoNome,\r\n        email,\r\n        telefone,\r\n        rua,\r\n        numero,\r\n        bairro,\r\n        cep,\r\n        complemento,\r\n        cidade,\r\n        estado,\r\n        password\r\n      });\r\n    }\r\n  };\r\n\r\n  function limpa_formulário_cep() {\r\n    //Limpa valores do formulário de cep.\r\n    document.getElementById(\"rua\").value = \"\";\r\n    document.getElementById(\"bairro\").value = \"\";\r\n    document.getElementById(\"cidade\").value = \"\";\r\n    document.getElementById(\"uf\").value = \"\";\r\n  }\r\n\r\n  function meu_callback(conteudo) {\r\n    if (!(\"erro\" in conteudo)) {\r\n      //Atualiza os campos com os valores.\r\n      document.getElementById(\"rua\").value = conteudo.logradouro;\r\n      document.getElementById(\"bairro\").value = conteudo.bairro;\r\n      document.getElementById(\"cidade\").value = conteudo.localidade;\r\n      document.getElementById(\"uf\").value = conteudo.uf;\r\n    } //end if.\r\n    else {\r\n      //CEP não Encontrado.\r\n      limpa_formulário_cep();\r\n      alert(\"CEP não encontrado.\");\r\n    }\r\n  }\r\n\r\n  function pesquisacep(valor) {\r\n    //Nova variável \"cep\" somente com dígitos.\r\n    var cep = valor.replace(/\\D/g, \"\");\r\n\r\n    //Verifica se campo cep possui valor informado.\r\n    if (cep !== \"\") {\r\n      //Expressão regular para validar o CEP.\r\n      var validacep = /^[0-9]{8}$/;\r\n\r\n      //Valida o formato do CEP.\r\n      if (validacep.test(cep)) {\r\n        //Preenche os campos com \"...\" enquanto consulta webservice.\r\n        document.getElementById(\"rua\").value = \"...\";\r\n        document.getElementById(\"bairro\").value = \"...\";\r\n        document.getElementById(\"cidade\").value = \"...\";\r\n        document.getElementById(\"uf\").value = \"...\";\r\n\r\n        //Cria um elemento javascript.\r\n        var script = document.createElement(\"script\");\r\n\r\n        //Sincroniza com o callback.\r\n        fetch(`https://viacep.com.br/ws/41650035/json`)\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            script.src = meu_callback(data);\r\n          });\r\n\r\n        //Insere script no documento e carrega o conteúdo.\r\n        document.body.appendChild(script);\r\n      } //end if.\r\n      else {\r\n        //cep é inválido.\r\n        limpa_formulário_cep();\r\n        alert(\"Formato de CEP inválido.\");\r\n      }\r\n    } //end if.\r\n    else {\r\n      //cep sem valor, limpa formulário.\r\n      limpa_formulário_cep();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"sign-up segments-page\">\r\n      <div className=\"container\">\r\n        <div className=\"signup-contents\">\r\n          <div className=\"pages-title\">\r\n            {carrinho.length > 0 ? (\r\n              \"Para continuar e comprar os seus Produtos, por favor preencha os dados abaixo:\"\r\n            ) : (\r\n              <h3>Cadastro</h3>\r\n            )}\r\n            <div className=\"line\"></div>\r\n          </div>\r\n          {}\r\n          <Link to=\"/login\">\r\n            <div className=\"pages-title\">\r\n              <h3>\r\n                Ja e Cliente?{\" \"}\r\n                <strong style={{ color: \"#c62828 \" }}>Faca Login</strong>\r\n              </h3>\r\n            </div>\r\n          </Link>\r\n          <form onSubmit={onSubmit} method=\"get\" action=\".\">\r\n            <label>Primeiro Nome</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"primeiroNome\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Ultimo Nome</label>\r\n            <input type=\"text\" name=\"ultimoNome\" onChange={onChange} required />\r\n            <label>Email</label>\r\n            <input type=\"email\" name=\"email\" onChange={onChange} required />\r\n            <label>Celular</label>\r\n            <input type=\"text\" name=\"telefone\" onChange={onChange} required />\r\n            <label>CEP</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"cep\"\r\n              onChange={onChange}\r\n              id=\"cep\"\r\n              size=\"10\"\r\n              maxLength=\"9\"\r\n              onBlur={() => pesquisacep(client.cep)}\r\n              required\r\n            />\r\n            <label>Rua</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"rua\"\r\n              id=\"rua\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Numero</label>\r\n            <input type=\"text\" name=\"numero\" onChange={onChange} required />\r\n            <label>Bairro</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"bairro\"\r\n              id=\"bairro\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Complemento</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"complemento\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Cidade</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"cidade\"\r\n              id=\"cidade\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Estado</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"estado\"\r\n              id=\"uf\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Senha</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <label>Confirme Senha</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password2\"\r\n              onChange={onChange}\r\n              required\r\n            />\r\n            <button type=\"submit\" className=\"btn\">\r\n              <i className=\"fa fa-send\"></i>Salvar\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cadastro;\r\n"]},"metadata":{},"sourceType":"module"}